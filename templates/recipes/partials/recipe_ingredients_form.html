{% load i18n %}


<div class="grid gird-cols-1 w-3xl gap-5">
    {{ wizard.form.management_form }}
    <input type="hidden" id="form-index-counter" value="{{ wizard.form.total_form_count }}">

    <div id="ingredient-formset" class="flex flex-col gap-5">
        {% for form in forms %}
            {% include 'recipes/partials/ingredient_form_row.html' with form=form form_index=forloop.counter0 %}
        {% endfor %}
    </div>

    <button type="button"
            class="btn rounded-sm! bg-transparent border-secondary text-secondary hover:text-accent-content hover:bg-secondary"
            hx-get="{% url 'add_ingredient_form' %}"
            hx-target="#ingredient-formset"
            hx-swap="beforeend"
            hx-vals="js:{form_count: document.querySelectorAll('#ingredient-formset .formset-form').length}"
            hx-on="htmx:afterRequest:document.querySelector('#id_recipe_ingredient-TOTAL_FORMS').value++; reindexFormset('#ingredient-formset', '#id_recipe_ingredient-TOTAL_FORMS');"
            id="add-ingredient">
        Add Ingredient
    </button>

</div>