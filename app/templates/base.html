{% load django_vite static %}

<!doctype html>
<html lang="{{ request.LANGUAGE_CODE|default:'de' }}" data-theme="gourmet">
<head>
    <meta name="google-site-verification" content="MdTWF5usBTiGStU8iA92M8vAN-aYHBHjxiwcGi8HagA" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{% block meta_description %}{{ seo.description }}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}{{ seo.keywords|join:', ' }}{% endblock %}">
    <meta name="author" content="Schugge Solutions">
    <meta name="robots" content="{% block meta_robots %}index,follow{% endblock %}">
    <meta name="theme-color" content="#7bcf3c">
    <meta name="msapplication-TileColor" content="#7bcf3c">

    <!-- Open Graph meta tags for better social media sharing -->
    {% block meta_og %}
    <meta property="og:type" content="{{ seo.og_type|default:'website' }}">
    <meta property="og:site_name" content="{{ seo.title }}">
    <meta property="og:title" content="{% firstof seo.title og_title %}">
    <meta property="og:description" content="{% firstof seo.description og_description %}">
    <meta property="og:url" content="{{ seo.canonical_url|default:request.build_absolute_uri }}">
    <meta property="og:image" content="{% if seo.image_url %}{{ seo.image_url }}{% elif og_image %}{{ og_image }}{% elif DEFAULT_OG_IMAGE %}{{ DEFAULT_OG_IMAGE }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'favicons/android-chrome-512x512.png' %}{% endif %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{{ seo.title }}">
    <meta property="og:locale" content="{{ request.LANGUAGE_CODE|default:'de' }}">
    {% endblock %}

    <!-- Twitter Card meta tags for Twitter sharing -->
    {% block meta_twitter %}
    <meta name="twitter:card" content="{{ seo.twitter_card|default:'summary_large_image' }}">
    <meta name="twitter:site" content="{{ seo.title }}">
    <meta name="twitter:title" content="{% firstof seo.title twitter_title og_title %}">
    <meta name="twitter:description" content="{% firstof seo.description twitter_description og_description %}">
    <meta name="twitter:image" content="{% if seo.image_url %}{{ seo.image_url }}{% elif twitter_image %}{{ twitter_image }}{% elif og_image %}{{ og_image }}{% elif DEFAULT_OG_IMAGE %}{{ DEFAULT_OG_IMAGE }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'favicons/android-chrome-512x512.png' %}{% endif %}">
    <meta name="twitter:image:alt" content="{{ seo.title }}">
    {% if seo.twitter_creator %}
    <meta name="twitter:creator" content="{{ seo.twitter_creator }}">
    {% endif %}
    {% endblock %}

    <!-- Canonical URL to prevent duplicate content issues -->
    {% block meta_canonical %}
    <link rel="canonical" href="{{ seo.canonical_url|default:request.build_absolute_uri }}">
    {% endblock %}

    {% block meta_extra %}{% endblock %}

    <!-- Favicon and app icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicons/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicons/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'favicons/site.webmanifest.json' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;800&display=swap" rel="stylesheet">

    <!-- Vite assets -->
    {% if debug %}
        {% vite_hmr_client %}
    {% endif %}
    {% vite_asset 'static/js/main.js' %}

    {% block jsonld %}
    <!-- Structured data for search engines -->
    {% if seo.json_ld %}
        {{ seo.get_json_ld_script }}
    {% else %}
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "{{ seo.title }}",
        "description": "{{ seo.description }}",
        "url": "{{ request.scheme }}://{{ request.get_host }}",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "{{ request.scheme }}://{{ request.get_host }}/suche?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    {% endif %}
    {% endblock %}

    {% block head %}{% endblock %}

    <title>{% block title %}{{ seo.title }}{% endblock %}</title>
</head>

<body id="main-body" class="flex flex-col max-w-screen min-h-screen bg-base-100 {% if user.is_authenticated %}pb-14{% endif %} lg:pb-0">

<!-- Skip to main content for accessibility -->
<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:p-4 focus:bg-primary focus:text-white">
    Zum Hauptinhalt springen
</a>

{% include "partials/navbar.html" %}
{% include "partials/alerts.html" %}

<main id="main-content" class="min-h-screen flex-grow w-full max-w-full flex flex-col gap-5 items-center justify-start pb-20 overflow-visible">
    {% block main_content %}
    {% endblock %}
</main>

<c-footer></c-footer>

{% if user.is_authenticated %}
    <c-dock></c-dock>
{% endif %}

<div id="modal-container"></div>

</body>
</html>