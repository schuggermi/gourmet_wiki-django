{% load django_vite static %}

<!doctype html>
<html lang="{{ request.LANGUAGE_CODE|default:'de' }}" data-theme="gourmet">
<head>
    <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="{{ CB_ID }}" type="text/javascript" async></script>

    <!-- Character encoding for Unicode -->
    <meta charset="UTF-8">
    <!-- Responsive viewport settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Page description for search engines -->
    <meta name="description"
          content="{% block meta_description %}{{ page_description|default:DEFAULT_DESCRIPTION|default:'Gourmet Wiki - Your ultimate resource for gourmet recipes and culinary knowledge' }}{% endblock %}">
    <!-- Keywords for search engines -->
    <meta name="keywords" content="{% block meta_keywords %}{{ page_keywords|default:DEFAULT_KEYWORDS|default:'gourmet recipes, recipe wiki, cooking techniques, ingredient guides' }}{% endblock %}">
    <!-- Author information -->
    <meta name="author" content="Gourmet Wiki Team">
    <!-- Control the behavior of search engine crawling and indexing -->
    <meta name="robots" content="{% block meta_robots %}index,follow{% endblock %}">
    <!-- Define the website's theme color for browser UI elements -->
    <meta name="theme-color" content="#7bcf3c">
    <meta name="background-color" content="#effcf3">

    <!-- Open Graph meta tags for better social media sharing -->
    {% block meta_og %}
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% firstof og_title page_title SITE_NAME 'Gourmet Wiki' %}">
    <meta property="og:description" content="{% firstof og_description page_description DEFAULT_DESCRIPTION 'Your ultimate resource for gourmet recipes and culinary knowledge' %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    {# Prefer configured default; otherwise fall back to a local favicon #}
    <meta property="og:image" content="{% if og_image %}{{ og_image }}{% elif DEFAULT_OG_IMAGE %}{{ DEFAULT_OG_IMAGE }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'favicons/android-chrome-512x512.png' %}{% endif %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="{{ SITE_NAME|default:'Gourmet Wiki' }}">
    {% endblock %}

    <!-- Twitter Card meta tags for Twitter sharing -->
    {% block meta_twitter %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@TODO_TWITTER">
    <meta name="twitter:title" content="{% firstof twitter_title og_title page_title SITE_NAME 'Gourmet Wiki' %}">
    <meta name="twitter:description" content="{% firstof twitter_description og_description DEFAULT_DESCRIPTION 'Your ultimate resource for gourmet recipes and culinary knowledge' %}">
    <meta name="twitter:image" content="{% if twitter_image %}{{ twitter_image }}{% elif og_image %}{{ og_image }}{% elif DEFAULT_OG_IMAGE %}{{ DEFAULT_OG_IMAGE }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'favicons/android-chrome-512x512.png' %}{% endif %}">
    {% endblock %}

    <!-- Canonical URL to prevent duplicate content issues -->
    {% block meta_canonical %}
    <link rel="canonical" href="{{ canonical|default:request.build_absolute_uri }}">
    {% endblock %}

    {% block meta_alternate %}{% endblock %}
    {% block meta_extra %}{% endblock %}

    <title>{% block title %}{{ page_title|default:SITE_NAME|default:'Gourmet Wiki' }}{% endblock %}</title>

    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicons/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicons/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'favicons/site.webmanifest.json' %}">

    {% if debug %}
        {% vite_hmr_client %}
    {% endif %}
    {% vite_asset 'static/js/main.js' %}

    {% block jsonld %}{% endblock %}
    {% block head %}{% endblock %}
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ GA_ID }}"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-BYM0XLT51B');
</script>
<body class="flex flex-col max-w-screen min-h-screen bg-base-100 {% if user.is_authenticated %}pb-14{% endif %} lg:pb-0">

{% include "partials/navbar.html" %}
{% include "partials/alerts.html" %}
<div class="min-h-screen flex-grow w-full max-w-full flex flex-col gap-5 items-center justify-start pb-20 overflow-visible">
    {% block main_content %}
    {% endblock %}
</div>

<c-footer></c-footer>

{% if user.is_authenticated %}
    <c-dock></c-dock>
{% endif %}

{% comment %}fixed right-2 md:right-5 w-fit max-w-xs{% endcomment %}

<script src="https://unpkg.com/htmx.org@1.9.10"></script>

</body>
</html>
